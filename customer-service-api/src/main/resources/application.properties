# Image configuration
quarkus.container-image.build=true
quarkus.container-image.group=@CONTAINER_IMAGE_GROUP@
quarkus.container-image.name=@CONTAINER_IMAGE_NAME@
quarkus.jib.base-jvm-image=registry.redhat.io/ubi9/openjdk-21-runtime@sha256:399a4169b3474e949597390191faab28f404e4cacc816de1b33fa389b48f929f
quarkus.jib.base-registry-username=${REGISTRY_USERNAME}
quarkus.jib.base-registry-password=${REGISTRY_PASSWORD}
quarkus.jib.jvm-arguments=-agentlib:jdwp=transport=dt_socket\\,server=y\\,suspend=n\\,address=*:5005
quarkus.jib.environment-variables.CDK_DEFAULT_ACCOUNT=@CDK_DEFAULT_ACCOUNT@
quarkus.jib.environment-variables.CDK_DEFAULT_REGION=@CDK_DEFAULT_REGION@

# Database configuration
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.username=${DB_USERNAME:postgres}
%prod.quarkus.datasource.password=${DB_PASSWORD:password}
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:customers}
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
%test.quarkus.hibernate-orm.schema-management.strategy=drop-and-create

# REST Client configuration for integration tests
quarkus.rest-client.customers-api.url=http://localhost:8080

# Fix LogManager error
java.util.logging.manager=org.jboss.logmanager.LogManager

# Disable Redis for tests (or use embedded)


# Hibernate
quarkus.hibernate-orm.schema-management.strategy=drop-and-create
quarkus.hibernate-orm.log.sql=false

# Redis configuration
%prod.quarkus.redis.hosts=redis://${REDIS_HOST:localhost}:${REDIS_PORT:6379}

# HTTP configuration
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

%prod.quarkus.swagger-ui.enabled=true
%prod.quarkus.swagger-ui.always-include=true
%prod.quarkus.swagger-ui.validator-url=none


