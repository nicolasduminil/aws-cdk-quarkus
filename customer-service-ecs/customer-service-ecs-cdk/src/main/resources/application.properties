cdk.image_name=${CDK_DEFAULT_ACCOUNT}.dkr.ecr.${CDK_DEFAULT_REGION}.amazonaws.com/${CONTAINER_IMAGE_GROUP}/${CONTAINER_IMAGE_NAME}:latest
cdk.container.port=${CONTAINER_PORT:8080}

quarkus.http.port=0

# Default configuration
cdk.infrastructure.vpc.max-azs=2
cdk.infrastructure.vpc.nat-gateways=1

cdk.infrastructure.ecs.cpu=256
cdk.infrastructure.ecs.memory-limit-mi-b=512
cdk.infrastructure.ecs.desired-count=2
cdk.infrastructure.ecs.health-check-grace-period-seconds=60
cdk.infrastructure.ecs.service-name=customer-service

cdk.infrastructure.database.instance-class=BURSTABLE3
cdk.infrastructure.database.instance-size=MICRO
cdk.infrastructure.database.database-name=customers
cdk.infrastructure.database.secret-username=postgres
cdk.infrastructure.database.deletion-protection=false

cdk.infrastructure.redis.node-type=cache.t3.micro
cdk.infrastructure.redis.num-nodes=1
cdk.infrastructure.redis.cluster-id=customer-cache
cdk.infrastructure.redis.description=Redis cache for customer service

cdk.infrastructure.logging.log-group-name=/ecs/customer-service
cdk.infrastructure.logging.retention-days=ONE_WEEK
cdk.infrastructure.logging.stream-prefix=ecs

# Development environment (smaller resources)
%dev.cdk.infrastructure.ecs.cpu=256
%dev.cdk.infrastructure.ecs.memory-limit-mi-b=512
%dev.cdk.infrastructure.ecs.desired-count=1

# Production environment (larger resources)
%prod.cdk.infrastructure.ecs.cpu=1024
%prod.cdk.infrastructure.ecs.memory-limit-mi-b=2048
%prod.cdk.infrastructure.ecs.desired-count=3
%prod.cdk.infrastructure.database.instance-class=BURSTABLE4G
%prod.cdk.infrastructure.database.instance-size=LARGE
%prod.cdk.infrastructure.redis.node-type=cache.t3.small
%prod.cdk.infrastructure.redis.num-nodes=2
%prod.cdk.infrastructure.logging.retention-days=ONE_MONTH

